version: "3"
services:
  videoroom:
    image: membraneframework/demo_webrtc_videoroom_advanced:${TAG:-latest}
    network_mode: "host"
    environment:
      VIRTUAL_HOST: "${VIRTUAL_HOST:-localhost}"
      USE_INTEGRATED_TURN: "true"
      INTEGRATED_TURN_IP: "${INTEGRATED_TURN_IP:-127.0.0.1}"
      INTEGRATED_TURN_PORT_RANGE: "50000-65355"
      INTEGRATED_TCP_TURN_PORT: "49999"
      STORE_METRICS: "true"
      DATABASE: "membrane"
      DB_USERNAME: "membrane"
      DB_PASSWORD: "membrane"
      DB_HOSTNAME: "127.0.0.1"
  timescale:
    image: timescale/timescaledb:2.5.1-pg14
    network_mode: "host"    
    environment:
      POSTGRES_DB: "membrane"
      POSTGRES_USER: "membrane"
      POSTGRES_PASSWORD: "membrane"
  grafana:
    image: grafana/grafana:9.1.5
    network_mode: host
    volumes:
      # - ./grafana/:/etc/grafana/
      - ./grafana/provisioning/datasources:/etc/grafana/provisioning/datasources


    

